

 <div class="container">
      <div class="card-deck mb-3 text-center">
        <div class="card mb-4 box-shadow">
            <ul class="list-unstyled mt-3 mb-4">
              <li><h1><%= @shop.title%></h1></li>
              <li><p><%= @shop.description%></p></li>
              <li><%= image_tag(@shop.image) if @shop.image.attached? %></li>
            </ul>
           <button data-stripe="payment" class= "btn btn-lg btn-block btn-primary">Check Out <%= number_to_currency(@shop.price) %></button>
       <% if user_signed_in? %>

       <% if @shop.user_id == current_user.id %>
          <h1><%=link_to "Edit", edit_shops_path(@shop)%></h1>
          <h1><%= link_to 'Delete', @shop, method: :delete, data: { confirm: 'Are you sure?' } %></h1>
        <%end%>
        <%end%>
      </div>
 </div>



<script src="https://js.stripe.com/v3/"></script>

<script>
  document
    .querySelector("[data-stripe='payment']")
    .addEventListener("click", () => {
      const stripe = Stripe(
        "<%= Rails.application.credentials.dig(:stripe, :public_key) %>"
      );

      stripe.redirectToCheckout({
        sessionId: "<%= @session_id %>"
      });
    });
</script>


